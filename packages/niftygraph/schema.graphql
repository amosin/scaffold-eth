enum SaleType {
  primary
  secondary
}

enum Network {
  xdai
  mainnet
  local
  kovan
  sokol
}

type File @entity {
  id: ID!
  nftNumber: BigInt!
  jsonUrl: String!
  creator: Creator!
  likers: [String!]
  likersWeight: [String!]
  limit: BigInt!
  count: BigInt
  tokens: [Token!]!
  sales: [Sale!] @derivedFrom(field: "nft")
  likes: [Like!] @derivedFrom(field: "file")
  createdAt: BigInt
  mintPrice: BigInt!
  mintPriceSetAt: BigInt
  mintPriceNonce: BigInt
  bestPrice: BigInt!
  bestPriceSource: String
  bestPriceSetAt: BigInt
  likeCount: BigInt
}

type Token @entity {
  id: ID!
  nft: File!
  owner: Bytes!
  createdAt: BigInt!
  network: Network!
  price: BigInt!
  priceSetAt: BigInt
  transfers: [TokenTransfer!] @derivedFrom(field: "token")
  sales: [Sale!] @derivedFrom(field: "token")
  upgradeTransfer: TokenTransfer
}

type Creator @entity {
  id: ID!
  address: Bytes!
  nfts: [File]! @derivedFrom(field: "creator")
  nftCount: BigInt!
  earnings: BigInt
  sales: [Sale!] @derivedFrom(field: "creator")
}

type Sale @entity {
  id: ID!
  buyer: Bytes!
  seller: Bytes
  price: BigInt!
  token: Token!
  nft: File!
  creator: Creator!
  createdAt: BigInt!
  creatorTake: BigInt!
  saleType: SaleType
  transfer: TokenTransfer!
}

type TokenTransfer @entity {
  id: ID!
  token: Token!
  from: Bytes!
  to: Bytes!
  createdAt: BigInt!
  network: Network
}

type RelayPrice @entity {
  id: ID!
  createdAt: BigInt!
  price: BigInt!
}

type MetaData @entity {
  id: ID!
  value: String!
}

type Total @entity {
  id: ID!
  day: BigInt
  nfts: BigInt
  tokens: BigInt
  sales: BigInt
  upgrades: BigInt
  creators: BigInt
}

type NftLookup @entity {
  id: ID!
  nftId: String!
}

type Ownership @entity {
  id: ID!
  owner: Bytes!
  newOwner: Bytes!
  ownerApproval: Boolean!
  newOwnerAcknowledgement: Boolean!
}

type Like @entity {
  id: ID!
  file: File!
  liker: Bytes!
  createdAt: BigInt!
}
